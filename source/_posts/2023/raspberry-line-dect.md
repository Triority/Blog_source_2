---
title: 树莓派使用神经网络识别操场跑道
tags:
  - null
cover: /img/RUN.png
categories:
- 折腾记录
date: 2023-11-03 12:40:38
description: LYK说如果在能用的情况下帧率达到3fps他就吃屎，我们来试一试
---
# 计划
我去操场上拍摄了三段视频作为试验

首先对每一帧压缩，分辨率到(240, 135)，然后也许去掉红色通道，因为地面和白色线都含有R去掉这一通道可以增加灰度图的对比度，而且少一个维度数据可以加快神经网络计算(甚至直接送进去灰度图？这样还能少一个通道)。然后进行经典的卷积池化然后全连接，输出设计为跑道最左侧线在图像几个纵坐标上的横坐标，比如图片纵轴8等分线上的7个横坐标。然后最小二乘拟合二次函数即可作为后面方向pid控制的输入。至于训练用的数据集，当然还是要opencv去标注的，数据格式打算用json自己写一个

# 训练数据准备：使用opencv标注
我测试了一下R通道保留和删去的灰度差距，目测差距还是有的但是没有我想象的大：
![](去掉红色通道灰度对比.png)

不过反正送进网络的不是灰度倒也无所谓，当然如果将来换成了灰度那另说。

所以现在考虑还是保留R通道看看性能消耗有多大，如果不行再减少

